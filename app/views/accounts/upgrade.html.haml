= content_for :title, 'Upgrade'

%script{src: "https://js.stripe.com/v2/", type: "text/javascript"}

:javascript
  mixpanel.track("View Upgrade Page");
  mixpanel.identify("#{@current_user.id}");

= render partial: 'subnav'

.uk-container.uk-container-center.uk-margin-large
  %h2 Upgrade
  %h4
    By completing the form you will be charged
    %strong Â£48
    for one years access to Beehive Giving Pro.

  .uk-width-large-4-5.uk-container-center.uk-margin-large-top.uk-animation-fade

    = form_tag account_charge_path(@recipient), id: 'payment-form', class: 'uk-form form' do
      %input#stripeToken{name: "stripeToken", type: "hidden"}

      .payment-errors
      .form-row
        %label.label Card number
        %input.large#card-number{"data-stripe": "number", size: "20", type: "text", placeholder: '4242 4242 4242 4242'}
      .form-row
        %label.label Expiration
        %input.large#expiry-month{"data-stripe": "exp_month", size: "2", type: "text", placeholder: 'MM'}
        %span
        %input.large#expiry-year{"data-stripe": "exp_year", size: "2", type: "text", placeholder: 'YY'}
      .form-row
        %label.label CVC
        %input.large#cvc{"data-stripe": "cvc", size: "4", type: "text", placeholder: '123'}
      %input.uk-button.uk-button-primary.large.submit{type: "submit", value: "Pay securely"}

      :javascript
        Stripe.setPublishableKey("#{Rails.configuration.stripe[:publishable_key]}");
