= content_for :title, "#{@theme.name} funds"

%header
  = cell :v2_navbar, @current_user
  = cell :breadcrumb, (@proposal ? 'Current proposal' : nil) => nil, 'Funds' => funds_path(@proposal), @theme.name => theme_path(@theme, @proposal)

%main
  .maxw1080.mx-auto.px20.flex.flex-wrap
    %aside.perc25.md.px20.mb40.to-end-md
      = render partial: 'sidebar'

    %section.perc75.md.mb80.px20
      %h1.mb20=@theme.name

      .mb30
        = cell :filter, params, funding_duration: @proposal&.funding_duration
        %small.slate
          = pluralize(@fund_count, 'fund')
          found

      - @funds.each do |fund|
        - if policy(FundContext.new(fund, @proposal)).show?
          = render(partial: 'fund', locals: { fund: fund })
        - else
          = render(partial: 'fund_redacted', locals: { fund: fund })

      = paginate @funds
