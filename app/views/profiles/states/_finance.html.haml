= content_for :title, 'Finance'

= simple_form_for [@recipient, @profile], method: :patch, remote: true, authenticity_token: true do |f|
  .uk-form.uk-form-stacked.form
    .cta
      %strong Don't have exact figures?
      Not a problem. Simply give an estimate and check 'Are these estimated figures?'

    .uk-width-1-1
      .uk-width-1-1
        .label
          Income in
          = @profile.year || get_year
        - if @recipient.charity_income && @recipient.charity_year_ending
          %small
            According to the Charity Commission you had
            %strong= number_to_currency(@recipient.charity_income, unit: '£', precision: 0)
            income in
            = succeed '.' do
              %strong= @recipient.charity_year_ending.to_date.year
      .uk-grid
        .uk-width-medium-1-2
          = f.input :income, as: :currency, input_html: { class: 'numeric integer uk-width-1-1 large', min: 0 }, placeholder: 'e.g. 1234'
          = f.error :income, class: 'error-message'
        .uk-display-block.boolean-padding
          = f.input :income_actual, as: :boolean, checked_value: false, unchecked_value: true, inline_label: 'Are these estimated figures?'

      .uk-width-1-1.uk-margin-top
        .label
          Expenditure in
          = @profile.year || get_year
        - if @recipient.charity_spending && @recipient.charity_year_ending
          %small
            According to the Charity Commission you had
            %strong= number_to_currency(@recipient.charity_spending, unit: '£', precision: 0)
            expenditure in
            = succeed '.' do
              %strong= @recipient.charity_year_ending.to_date.year
        .uk-grid
          .uk-width-medium-1-2
            = f.input :expenditure, as: :currency, input_html: { class: 'numeric integer uk-width-1-1 large', min: 0 }, placeholder: 'e.g. 2345'
            = f.error :expenditure, class: 'error-message'
          .uk-display-block.boolean-padding
            = f.input :expenditure_actual, as: :boolean, checked_value: false, unchecked_value: true, inline_label: 'Are these estimated figures?'

  - unless @profile.complete?
    = f.button :button, 'Next', class: 'uk-button uk-button-primary uk-margin-top uk-button-large uk-width-medium-1-2 uk-float-right', data: {disable_with: "<i style='color: #fff;' class='uk-icon uk-icon-circle-o-notch uk-icon-spin'></i><span style='color: #fff;'> Matching funders...</span>"}
