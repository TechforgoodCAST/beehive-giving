= content_for :title, 'Location'

= simple_form_for [@recipient, @profile], method: :patch, remote: true do |f|
  .cta
    %strong Remember:
    You can choose multiple countries and regions, and easily filter them by typing in the boxes below. Importantly, being specific will improve your funder matches.

  .uk-form.uk-form-stacked.form
    .uk-width-1-1
      .label List the countries where your organisation or project has impact
      = f.association :countries, collection: Country.order('priority DESC'), input_html: { class: 'chosen-select large' }
      = f.error :countries, class: 'error-message'

    .uk-width-1-1.uk-margin-top
      .label List the regions where your organisation or project has impact
      = f.association :districts, collection: Country.includes(:districts), as: :grouped_select, group_method: :districts, label_method: :label, value_method: :id, input_html: { multiple: true, class: 'chosen-select large' }
      = f.error :districts, class: 'error-message'
      %small.muted This list will populate once you've selected some countries

  - unless @profile.state == 'complete'
    = f.button :button, 'Next', class: 'uk-button uk-button-primary uk-margin-top uk-button-large uk-width-medium-1-2 uk-float-right', data: {disable_with: "<i style='color: #fff;' class='uk-icon uk-icon-circle-o-notch uk-icon-spin'></i><span style='color: #fff;'> Now we're cooking...</span>"}
