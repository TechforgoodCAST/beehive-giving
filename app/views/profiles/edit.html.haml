= stylesheet_link_tag 'modals.css'

:javascript
  mixpanel.track("Page View", {"Page Name": "Edit Profile"});

- if @profile.state == 'complete'
  .uk-container.uk-container-center
    .uk-grid.uk-margin-large.uk-margin-large-top
      .uk-width-medium-1-1.uk-animation-fade
        .uk-vertical-align.uk-text-center{:style => "min-height: 480px;"}
          .uk-width-large-2-3.uk-vertical-align-middle.uk-text-left
            %h2
              Update
              = "#{@profile.year}'s"
              profile
            = simple_form_for [@recipient, @profile], method: :patch do |f|
              .uk-animation-fade= render partial: "profiles/form", locals: { f: f }
              = f.button :button, 'Update', class: 'uk-button uk-button-primary uk-width-1-1', style: 'color: #fff;', data: {disable_with: "<i style='color: #999;' class='uk-icon uk-icon-circle-o-notch uk-icon-spin'></i><span style='color: #999;'> Saving...</span>"}

- else
  - content_for :signup do
    = render partial: 'funders/static_background'

  #edit-profile-modal.uk-modal
    .uk-modal-dialog
      = simple_form_for [@recipient, @profile], method: :patch do |f|
        = f.hidden_field :year, value: Date.today.year.to_s
        = f.error :year, class: 'uk-text-small uk-text-warning'
        = render partial: "profiles/states/#{@profile.state}", locals: { f: f, mode: :new }
    = render 'snippets/need_help'

  :javascript
    var modal = $.UIkit.modal('#edit-profile-modal');
    modal.options.bgclose = false;
    modal.options.keyboard = false;
    modal.show();
