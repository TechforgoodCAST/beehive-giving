= javascript_include_tag "//www.google.com/jsapi", "chartkick"
= line_chart [{name: "Users", data: User.where("role = ?", "User").group_by_week(:created_at, week_start: :mon, range: 12.weeks.ago..Time.now).count}, {name: "Non-profits", data: Recipient.joins(:users).group_by_week('users.created_at', week_start: :mon, range: 12.weeks.ago..Time.now).count}, {name: "Profiles", data: Profile.group_by_week(:created_at, week_start: :mon, range: 12.weeks.ago..Time.now).count}, {name: "1 Funder unlock", data: Recipient.joins(:users).where('recipient_funder_accesses_count = ?', 1).group_by_week('users.created_at', week_start: :mon, range: 12.weeks.ago..Time.now).count}, {name: "2 Funder unlock", data: Recipient.joins(:users).where('recipient_funder_accesses_count = ?', 2).group_by_week('users.created_at', week_start: :mon, range: 12.weeks.ago..Time.now).count}]
