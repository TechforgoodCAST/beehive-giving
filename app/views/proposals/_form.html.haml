= simple_form_for [@recipient, @proposal], remote: true do |f|
  .uk-grid.uk-form.form
    = f.error :recipient
    = f.error :recipient_id
    .uk-width-medium-1-1
      = f.input :title, input_html: { class: 'large uk-width-1-1' }
      = f.error :title, class: 'error-message'
    .uk-width-medium-1-1.uk-margin-top
      = f.input :tagline, as: :text, input_html: { class: 'uk-width-1-1' }
      = f.error :tagline, class: 'error-message'
      .muted.uk-float-right#char_count

    .uk-width-medium-1-1.uk-margin-top
      .label Who will the proposed work primarily benefit?
      .nested-questions
        .label People...
        %small.muted Select as many as applicable. More options below.
        = f.association :beneficiaries, as: :check_boxes, collection: Beneficiary.order(:sort).where(category: 'People'), label_method: :label, value_method: :id
        = f.error :beneficiaries, class: 'error-message'
        .uk-grid
          .uk-width-medium-1-3.uk-margin-top
            .label Gender
            = f.input :gender, collection: Profile::GENDERS, input_html: { class: 'large uk-width-1-1' }
            = f.error :gender, class: 'error-message'
          .uk-width-medium-1-3.uk-margin-top
            .label Minimum age
            = f.input :min_age, error: false, input_html: { class: 'large uk-width-1-1', min: 0 }
            = f.error :min_age, class: 'error-message'
          .uk-width-medium-1-3.uk-margin-top
            .label Maximum age
            = f.input :max_age, error: false, input_html: { class: 'large uk-width-1-1', min: 0 }
            = f.error :max_age, class: 'error-message'
        .uk-width-1-1.uk-margin-top
          .label How many people will be affected by the proposed work?
          = f.input :beneficiaries_count, input_html: { class: 'large uk-width-1-1' }
          = f.error :beneficiaries_count, class: 'error-message'
        .uk-width-1-1.uk-margin-top
          %a.uk-button.uk-button-primary.uk-button-small.more-options
            More options
            %i.uk-icon-caret-down
          #more-beneficiary-options.uk-margin-top.uk-hidden
            = f.association :beneficiaries, as: :check_boxes, collection: Beneficiary.order(:sort).where(category: 'Other'), label_method: :label, value_method: :id
            .uk-width-medium-1-2
              .checkbox.wide= f.input :beneficiaries_other_required, as: :boolean, inline_label: 'Other', input_html: { class: 'toggle-other' }
              .other.uk-hidden
                = f.input :beneficiaries_other, input_html: { class: 'large other uk-width-medium-1-1' }
                = f.error :beneficiaries_other, class: 'error-message other'

    .uk-width-1-1.uk-margin-large-top
      .label List the countries the proposed work will affect:
      = f.association :countries, collection: Country.order('priority DESC'), input_html: { class: 'country_field chosen-select large' }
      = f.error :countries, class: 'error-message'

    .uk-width-1-1.uk-margin-top
      .label List the regions the proposed work will affect:
      = f.association :districts, collection: Country.includes(:districts).order('districts.id'), as: :grouped_select, group_method: :districts, label_method: :label, value_method: :id, input_html: { multiple: true, class: 'district_field chosen-select large' }
      = f.error :districts, class: 'error-message'
      %small.muted This list will populate once you've selected some countries

    .uk-width-1-1.uk-margin-large-top
      .label How long do you require funding for?
      = f.input :funding_duration, as: :month, input_html: { class: 'numeric integer large', min: 0 }, placeholder: 'e.g. 12'
      = f.error :funding_duration, class: 'error-message'

    .uk-width-medium-1-1.uk-margin-large-top
      .label How much funding are you seeking?
      .muted Give your best estimate and tick the appropriate box if you don't have exact figures. You can easily update them later.
      .nested-questions
        .uk-width-1-1
          Activity costs (e.g. venue hire, promotional materials, fuel)
          .uk-grid
            .uk-width-medium-1-2
              = f.input :activity_costs, as: :currency, input_html: { class: 'numeric integer uk-width-1-1 large', min: 0 }, placeholder: 'e.g. 1234'
              = f.error :activity_costs, class: 'error-message'
            .uk-display-block.boolean-padding
              = f.input :activity_costs_estimated, as: :boolean, inline_label: 'Are these estimated figures?'

        %hr

        .uk-width-1-1
          People costs (e.g. salaries, consultants fees, volunteer expenses)
          .uk-grid
            .uk-width-medium-1-2
              = f.input :people_costs, as: :currency, input_html: { class: 'numeric integer uk-width-1-1 large', min: 0 }, placeholder: 'e.g. 1234'
              = f.error :people_costs, class: 'error-message'
            .uk-display-block.boolean-padding
              = f.input :people_costs_estimated, as: :boolean, inline_label: 'Are these estimated figures?'

        %hr

        .uk-width-1-1.uk-margin-top
          Capital costs (e.g. one time purchasing of equipment or assets)
          .uk-grid
            .uk-width-medium-1-2
              = f.input :capital_costs, as: :currency, input_html: { class: 'numeric integer uk-width-1-1 large', min: 0 }, placeholder: 'e.g. 1234'
              = f.error :capital_costs, class: 'error-message'
            .uk-display-block.boolean-padding
              = f.input :capital_costs_estimated, as: :boolean, inline_label: 'Are these estimated figures?'

        %hr

        .uk-width-1-1.uk-margin-top
          Other costs (e.g. rent, utilities)
          .uk-grid
            .uk-width-medium-1-2
              = f.input :other_costs, as: :currency, input_html: { class: 'numeric integer uk-width-1-1 large', min: 0 }, placeholder: 'e.g. 1234'
              = f.error :other_costs, class: 'error-message'
            .uk-display-block.boolean-padding
              = f.input :other_costs_estimated, as: :boolean, inline_label: 'Are these estimated figures?'

        %hr

        .uk-width-medium-1-1.uk-margin-top
          Is this all of the funding required for the proposed work?
          .muted.uk-margin i.e. Does the proposed work require funding in addition to the amount sought above?
          = f.input :all_funding_required, as: :radio_buttons, input_html: { class: 'uk-width-1-1' }
          = f.error :all_funding_required, class: 'error-message'

        %hr
        %h3.uk-margin-bottom-remove
          Total
          = precede 'Â£' do
            %span.total 0
        %small.muted The total will update when you change the figures above

    .uk-width-medium-1-1.uk-margin-large-top
      .label List 1-5 outcomes for the proposed work below:
      = f.input :outcome1, input_html: { class: 'large uk-width-1-1 uk-margin-top' }
      = f.error :outcome1, class: 'error-message'

      = f.input :outcome2, input_html: { class: 'large uk-width-1-1 uk-margin-top' }
      = f.input :outcome3, input_html: { class: 'large uk-width-1-1 uk-margin-top' }
      = f.input :outcome4, input_html: { class: 'large uk-width-1-1 uk-margin-top' }
      = f.input :outcome5, input_html: { class: 'large uk-width-1-1 uk-margin-top' }

      %hr.uk-margin-bottom.thick

    .uk-width-medium-1-1.uk-margin-top
      = f.button :button, 'Improve my results', class: 'uk-button uk-button-primary uk-button-large uk-width-medium-1-2 uk-float-right', data: {disable_with: "<i style='color: #fff;' class='uk-icon uk-icon-circle-o-notch uk-icon-spin'></i><span style='color: #fff;'> Matching funders...</span>"}
